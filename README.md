# Match-3 Game

Классическая игра "три в ряд" на языке Lua с модульной архитектурой.

## Установка и запуск

1. Убедитесь, что у вас установлен Lua 5.1 или выше
2. Запустите игру командой:
   ```
   lua main.lua
   ```

## Управление

- `m x y d` - переместить кристалл
  - `x, y` - координаты (0-9)
  - `d` - направление:
    - `l` - влево
    - `r` - вправо
    - `u` - вверх
    - `d` - вниз
- `q` - выход из игры

## Правила игры

1. Меняйте местами соседние кристаллы
2. Собирайте линии из 3 или более одинаковых кристаллов
3. Кристаллы исчезают, новые падают сверху
4. За каждый удаленный кристалл вы получаете 10 очков
5. Если нет возможных ходов, поле автоматически перемешивается

## Структура проекта

```
Match3/
├── main.lua                    # Точка входа в игру
├── test_architecture.lua       # Демонстрация новой архитектуры
├── config/
│   └── config.lua              # Настройки игры
└── src/
    ├── field.lua               # Модуль игрового поля
    ├── gamefieldPositioning.lua # Модуль позиционирования на поле
    ├── game.lua                # Игровая логика
    ├── special_stones.lua      # Специальные камни и эффекты
    ├── view.lua                # Визуализация
    └── utils.lua               # Утилиты
```

## Архитектура

Игра использует улучшенную модульную архитектуру с четким разделением ответственности:

- **GameFieldPositioning** - чистые расчеты позиций на поле
- **Field** - управление игровым полем и выполнение операций
- **SpecialStones** - определение специальных эффектов
- **Game** - игровая логика и состояние
- **View** - визуализация и пользовательский интерфейс

Подробнее об архитектуре см. в [README_MODULES.md](README_MODULES.md)

## Особенности

- ✅ Улучшенная модульная архитектура
- ✅ Четкое разделение ответственности модулей
- ✅ Объектно-ориентированный подход
- ✅ Расширяемая система специальных эффектов
- ✅ Гибкое позиционирование на игровом поле
- ✅ Автоматическое перемешивание при отсутствии ходов
- ✅ Подсчет очков
- ✅ Проверка валидности ходов
- ✅ Каскадное удаление совпадений

## Тестирование архитектуры

Для демонстрации новой архитектуры запустите:
```
lua test_architecture.lua
```

## Лицензия

MIT License - см. файл [LICENSE](LICENSE)
